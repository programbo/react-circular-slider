<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  <script src="https://d3js.org/d3-array.v1.min.js"></script>
  <script src="https://d3js.org/d3-collection.v1.min.js"></script>
  <script src="https://d3js.org/d3-color.v1.min.js"></script>
  <script src="https://d3js.org/d3-format.v1.min.js"></script>
  <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
  <script src="https://d3js.org/d3-time.v1.min.js"></script>
  <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
  <script src="https://d3js.org/d3-scale.v2.min.js"></script>
  <script src="https://d3js.org/d3-path.v1.min.js"></script>
  <script src="https://d3js.org/d3-shape.v1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-shape/1.2.0/d3-shape.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="dist/circular-slider.umd.js"></script>
  <script src="dist/circular-slider-helpers.umd.js"></script>
  <title>Document</title>
</head>

<body>
  <div id="root">
    UMD
  </div>
  <script type="text/babel">
    const {CircularSlider} = circularSlider
    const {calculateRadialPositionFromValue} = circularSliderHelpers

    class MySlider extends React.Component {
      constructor(props) {
        super(props)
        this.state = {
          value: null,
          pressed: false,
          pristine: true,
          coordinates: {x: 0, y: 0}
        }
      }
      render() {
        const {
          draggableSize,
          defaultValue,
          maxValue,
          minValue,
          padding,
          palette,
          radius,
          ringThickness,
          description,
        } = this.props
        const { coordinates, pressed, pristine, value } = this.state
        return <div className="circular-slider__wrapper">
          <CircularSlider
            maxValue={maxValue}
            minValue={minValue}
            onMove={this.updateDraggable}
            onMoveEnd={this.updateDraggable}
            radius={radius - ringThickness / 2}
            size={(radius + padding) * 2}
            value={value}
            defaultValue={defaultValue}
            draggable={
              coordinates && (
                <svg viewBox="0 0 40 40" style={{
                  width: 40,
                  height: 40,
                  position: 'absolute',
                  top: coordinates ? coordinates.y : 0,
                  left: coordinates ? coordinates.x : 0,
                  transform: `translate(-50%, -50%)`,
                }}>
                  <circle cx="20" cy="20" r="20" fill="blue" cursor="pointer" />
                </svg>
              )
            }
          >
              <svg viewBox={`0 0 ${radius * 2} ${radius * 2}`}>
              <circle cx={radius} cy={radius} r={radius - 12} stroke="black" fill="none" strokeWidth={20} />
            </svg>
          </CircularSlider>
        </div>
      }

      updateDraggable = ({ coordinates, pressed, value }) => {
        const { onChange } = this.props
        this.setState(
          ({ pristine }) => ({ coordinates, pressed, value, pristine: pressed && pristine ? false : pristine })
        )
      }

    }
    ReactDOM.render(
      <MySlider
        defaultValue={0}
        minValue={0}
        maxValue={100}
        radius={100}
        padding={3}
        ringThickness={20}
        rotationAdjustment={-90}
      />, document.getElementById('root'));
  </script>
</body>

</html>
